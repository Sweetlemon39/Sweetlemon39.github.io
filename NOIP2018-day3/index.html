<!DOCTYPE html><html><head hexo-theme="https://volantis.js.org/#1.7.4"><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>NOIP 2018 集训 Day 3 - Sweetlemon 的异世界</title><meta name="keywords" content="笔记,图论"><meta name="description" content=" 图论"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.12.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css"><link rel="shortcut icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/mrj1018/OI/lemon.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.7.4/css/style.css"><script>function setLoadingBarProgress(e){document.getElementById("loading-bar").style.width=e+"%"}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body)"></script></head><body><div class="cover-wrapper"><cover class="cover post half"><p class="title">Sweetlemon 的异世界</p><p class="subtitle">原来你也在这里啊</p><div class="m_search"><form name="searchform" class="form u-search-form"><i class="icon fas fa-search fa-fw"></i> <input type="text" class="input u-search-input" placeholder="一直在寻找着你的踪迹"></form></div><div class="menu navigation"><ul class="h-list"><li><a class="nav home" href="/" id="home"><i class="fas fa-home fa-fw"></i>&nbsp;主页</a></li><li><a class="nav home" href="/categories/" id="categories"><i class="fas fa-folder-open fa-fw"></i>&nbsp;分类</a></li><li><a class="nav home" href="/archives/" id="archives"><i class="fas fa-archive fa-fw"></i>&nbsp;归档</a></li><li><a class="nav home" href="/about/" id="about"><i class="fas fa-info-circle fa-fw"></i>&nbsp;关于</a></li></ul></div></cover><header class="l_header nav-blur"><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><div class="wrapper"><div class="nav-main container container--flex"><a class="logo flat-box" target="_self" href="/">Sweetlemon 的异世界</a><div class="menu navigation"><ul class="h-list"><li><a class="nav flat-box" href="/" id="home"><i class="fas fa-home fa-fw"></i>&nbsp;主页</a></li><li><a class="nav flat-box" href="/categories/" id="categories"><i class="fas fa-folder-open fa-fw"></i>&nbsp;分类</a></li><li><a class="nav flat-box" href="/archives/" id="archives"><i class="fas fa-archive fa-fw"></i>&nbsp;归档</a></li><li><a class="nav flat-box" href="/about/" id="about"><i class="fas fa-info-circle fa-fw"></i>&nbsp;关于</a></li></ul></div><div class="m_search"><form name="searchform" class="form u-search-form"><i class="icon fas fa-search fa-fw"></i> <input type="text" class="input u-search-input" placeholder="一直在寻找着你"></form></div><ul class="switcher h-list"><li class="s-search"><a class="fas fa-search fa-fw" target="_self" href="javascript:void(0)"></a></li><li class="s-menu"><a class="fas fa-bars fa-fw" target="_self" href="javascript:void(0)"></a></li></ul></div><div class="nav-sub container container--flex"><a class="logo flat-box"></a><ul class="switcher h-list"><li class="s-comment"><a class="flat-btn fas fa-comments fa-fw" target="_self" href="javascript:void(0)"></a></li><li class="s-toc"><a class="flat-btn fas fa-list fa-fw" target="_self" href="javascript:void(0)"></a></li></ul></div></div></header><aside class="menu-phone white-box"><header><nav class="menu navigation"><ul><li><a class="nav flat-box" href="/" id="home"><i class="fas fa-home fa-fw"></i>&nbsp;主页</a></li><li><a class="nav flat-box" href="/categories/" id="categories"><i class="fas fa-folder-open fa-fw"></i>&nbsp;分类</a></li><li><a class="nav flat-box" href="/archives/" id="archives"><i class="fas fa-archive fa-fw"></i>&nbsp;归档</a></li><li><a class="nav flat-box" href="/about/" id="about"><i class="fas fa-info-circle fa-fw"></i>&nbsp;关于</a></li></ul></nav></header></aside><script>setLoadingBarProgress(40)</script></div><div class="l_body"><div class="body-wrapper"><div class="l_main"><article id="post" class="post white-box article-type-post" itemscope itemprop="blogPost"><section class="meta"><div class="meta" id="header-meta"><h1 class="title"><a href="/NOIP2018-day3/">NOIP 2018 集训 Day 3</a></h1><div class="new-meta-box"><div class="new-meta-item author"><a href="https://sweetlemon39.github.io/" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/mrj1018/OI/lemon.png"><p>Sweetlemon</p></a></div><div class="new-meta-item category"><a href="/categories/%E5%8D%B3%E6%97%B6%E7%AC%94%E8%AE%B0/" rel="nofollow"><i class="fas fa-folder-open" aria-hidden="true"></i><p>即时笔记</p></a></div><div class="new-meta-item date"><a class="notlink"><i class="fas fa-edit" aria-hidden="true"></i><p>发布于：2018年10月22日</p></a></div><div class="new-meta-item date" itemprop="dateUpdated" datetime="2018-10-22T00:00:00+00:00"><a class="notlink"><i class="fas fa-save" aria-hidden="true"></i><p>更新于：2018年10月22日</p></a></div></div><hr></div></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><h2 id="图论"><a class="markdownIt-Anchor" href="#图论"></a> 图论</h2><a id="more"></a><h3 id="图的存储"><a class="markdownIt-Anchor" href="#图的存储"></a> 图的存储</h3><ul><li>邻接矩阵（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>O</mtext><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{O}(n^{2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">O</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>）</li><li>邻接表（时间复杂度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>O</mtext><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{O}(n+m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">O</span></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span>，空间复杂度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>O</mtext><mo stretchy="false">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{O}(n^{2})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">O</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.8141079999999999em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>）</li><li>邻接链表（<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>O</mtext><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{O}(n+m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">O</span></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">m</span><span class="mclose">)</span></span></span></span>）</li></ul><h3 id="图的遍历"><a class="markdownIt-Anchor" href="#图的遍历"></a> 图的遍历</h3><h4 id="textbfs"><a class="markdownIt-Anchor" href="#textbfs"></a> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>bfs</mtext></mrow><annotation encoding="application/x-tex">\text{bfs}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">bfs</span></span></span></span></span></h4><p>计算无权图或树上最短路、求连通块比较实用。</p><p>输出路径可以用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>dis</mtext></mrow><annotation encoding="application/x-tex">\text{dis}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">dis</span></span></span></span></span>乱搞，也可以在松弛的时候记录路径上的上一个点（也可以叫做最短路径树上的父节点）。</p><p>输出字典序最小的路径，可以在反图上进行搜索，再根据字典序倒推路径的上一个点。</p><p><strong><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>printf</mtext></mrow><annotation encoding="application/x-tex">\text{printf}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord text"><span class="mord">printf</span></span></span></span></span>输出技巧</strong> <code>printf(&quot;%5d&quot;,x);</code>右对齐占<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">5</span></span></span></span>格，<code>printf(&quot;%-5d&quot;,x);</code>左对齐占<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>5</mn></mrow><annotation encoding="application/x-tex">5</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">5</span></span></span></span>格。</p><h4 id="障碍路线"><a class="markdownIt-Anchor" href="#障碍路线"></a> <a href="https://www.luogu.org/problemnew/show/P1649" target="_blank" rel="noopener">障碍路线</a></h4><p>状态包含位置和朝向。</p><p>巧妙地设计转移坐标数组<code>turnx[]={0,1,0,-1};turny[]={1,0,-1,0};</code>，使向右转恰好是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mn>1</mn><mspace></mspace><mspace width="0.4444444444444444em"><mo stretchy="false">(</mo><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mspace width="0.3333333333333333em"><mn>4</mn><mo stretchy="false">)</mo></mspace></mspace></mrow><annotation encoding="application/x-tex">+1 \pmod{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.72777em;vertical-align:-.08333em"></span><span class="mord">+</span><span class="mord">1</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:.4444444444444444em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:.3333333333333333em"></span><span class="mord">4</span><span class="mclose">)</span></span></span></span>，左转恰好是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mn>1</mn><mspace></mspace><mspace width="0.4444444444444444em"><mo stretchy="false">(</mo><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow><mspace width="0.3333333333333333em"><mn>4</mn><mo stretchy="false">)</mo></mspace></mspace></mrow><annotation encoding="application/x-tex">-1 \pmod{4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.72777em;vertical-align:-.08333em"></span><span class="mord">−</span><span class="mord">1</span><span class="mspace allowbreak"></span><span class="mspace" style="margin-right:.4444444444444444em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:.3333333333333333em"></span><span class="mord">4</span><span class="mclose">)</span></span></span></span>。</p><p>为了使用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>bfs</mtext></mrow><annotation encoding="application/x-tex">\text{bfs}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">bfs</span></span></span></span></span>，要一次性将所有下一个转弯的位置加入队列中，搜到终点直接返回即可。</p><p>防止重复的要点：强制至少走一步，不允许原地转弯。</p><h4 id="最优贸易"><a class="markdownIt-Anchor" href="#最优贸易"></a> <a href="https://www.luogu.org/problemnew/show/P1073" target="_blank" rel="noopener">最优贸易</a></h4><p><s>强连通分量缩点+<span class="katex"><span class="katex-mathml"><math><semantics><mrow><menclose notation="horizontalstrike"><mtext>DAG</mtext></menclose></mrow><annotation encoding="application/x-tex">\sout{\text{DAG}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.68333em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">DAG</span></span></span></span><span style="top:-3.2155em"><span class="pstrut" style="height:3em"></span><span class="stretchy sout"></span></span></span></span></span></span></span></span></span>上<span class="katex"><span class="katex-mathml"><math><semantics><mrow><menclose notation="horizontalstrike"><mtext>dp</mtext></menclose></mrow><annotation encoding="application/x-tex">\sout{\text{dp}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.69444em"><span style="top:-3em"><span class="pstrut" style="height:3em"></span><span class="mord"><span class="mord text"><span class="mord">dp</span></span></span></span><span style="top:-3.2155em"><span class="pstrut" style="height:3em"></span><span class="stretchy sout"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.19444em"><span></span></span></span></span></span></span></span></span></s></p><p>纯<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>bfs</mtext></mrow><annotation encoding="application/x-tex">\text{bfs}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">bfs</span></span></span></span></span>！厉害吧。</p><p><strong>注意到价格很小，考虑到按价格拆点。</strong></p><p>先去除所有不能到达<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault">n</span></span></span></span>的点，可以在反图上<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>bfs</mtext></mrow><annotation encoding="application/x-tex">\text{bfs}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">bfs</span></span></span></span></span>或<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>dfs</mtext></mrow><annotation encoding="application/x-tex">\text{dfs}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">dfs</span></span></span></span></span>。</p><p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>f</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\text{f}[i][j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">f</span></span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:.05724em">j</span><span class="mclose">]</span></span></span></span>表示到达<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.65952em;vertical-align:0"></span><span class="mord mathdefault">i</span></span></span></span>时所经过的点的最低价为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.85396em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.05724em">j</span></span></span></span>能否实现。从起点开始进行<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>bfs</mtext></mrow><annotation encoding="application/x-tex">\text{bfs}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">bfs</span></span></span></span></span>，对于遍历到的每个可能状态<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>f</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>j</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">\text{f}[i][j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">f</span></span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:.05724em">j</span><span class="mclose">]</span></span></span></span>，用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>price</mtext><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>−</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">\text{price}[i]-j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">price</span></span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">−</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.85396em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.05724em">j</span></span></span></span>更新答案。如果发现了一个新的可能状态，就把它入队。</p><h4 id="关押罪犯"><a class="markdownIt-Anchor" href="#关押罪犯"></a> <a href="https://www.luogu.org/problemnew/show/P1525" target="_blank" rel="noopener">关押罪犯</a></h4><p>对答案二分，用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>bfs</mtext></mrow><annotation encoding="application/x-tex">\text{bfs}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">bfs</span></span></span></span></span>或<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>dfs</mtext></mrow><annotation encoding="application/x-tex">\text{dfs}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">dfs</span></span></span></span></span>染色，自动过滤掉边权不大于答案的边。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>O</mtext><mo stretchy="false">(</mo><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo><mi>log</mi><mo>⁡</mo><mi>c</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{O}((n+m)\log c)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">O</span></span><span class="mopen">(</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault">m</span><span class="mclose">)</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mop">lo<span style="margin-right:.01389em">g</span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault">c</span><span class="mclose">)</span></span></span></span>。</p><h3 id="textdag"><a class="markdownIt-Anchor" href="#textdag"></a> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>DAG</mtext></mrow><annotation encoding="application/x-tex">\text{DAG}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord text"><span class="mord">DAG</span></span></span></span></span></h3><h4 id="车站分级"><a class="markdownIt-Anchor" href="#车站分级"></a> <a href="https://www.luogu.org/problemnew/show/P1983" target="_blank" rel="noopener">车站分级</a></h4><p>直接拓扑排序边会过多，要添加<strong>虚拟的中间点</strong>，两个级别的车站连边时，上一级别的车站统一向虚拟点连边，再由虚拟点连向下一级别的车站。</p><p>这么做的原因是，题目给出的是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∀</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>A</mi><mo>×</mo><mi>B</mi><mo separator="true">,</mo><mi>x</mi><mo>&lt;</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">\forall (x,y) \in A \times B,x&lt;y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord">∀</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault" style="margin-right:.03588em">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.76666em;vertical-align:-.08333em"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:.2222222222222222em"></span><span class="mbin">×</span><span class="mspace" style="margin-right:.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:.8777699999999999em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.05017em">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:.625em;vertical-align:-.19444em"></span><span class="mord mathdefault" style="margin-right:.03588em">y</span></span></span></span>这样的关系。</p><p>回忆我们解数学题时处理这样的条件的过程：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">∀</mi><msub><mi>x</mi><mn>1</mn></msub><mo>∈</mo><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi mathvariant="normal">∀</mi><msub><mi>x</mi><mn>2</mn></msub><mo>∈</mo><mo stretchy="false">[</mo><mi>c</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">]</mo><mo separator="true">,</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>1</mn></msub><mo stretchy="false">)</mo><mo>&gt;</mo><mi>g</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\forall x_{1}\in [a,b],\forall x_{2}\in [c,d],f(x_1)&gt;g(x_2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.84444em;vertical-align:-.15em"></span><span class="mord">∀</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault">b</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord">∀</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault">d</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault" style="margin-right:.10764em">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.03588em">g</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。我们可以把它转化为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">f(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.10764em">f</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>a</mi><mo separator="true">,</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[a,b]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord mathdefault">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault">b</span><span class="mclose">]</span></span></span></span>内的最小值大于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mo stretchy="false">(</mo><mi>x</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">g(x)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord mathdefault" style="margin-right:.03588em">g</span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mclose">)</span></span></span></span>在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>c</mi><mo separator="true">,</mo><mi>d</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[c,d]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">[</span><span class="mord mathdefault">c</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord mathdefault">d</span><span class="mclose">]</span></span></span></span>内的最大值。</p><p>进行知识迁移，我们把信息转化为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>&gt;</mo><mi>max</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\min(A)&gt;\max(B)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mop">min</span><span class="mopen">(</span><span class="mord mathdefault">A</span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mop">max</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:.05017em">B</span><span class="mclose">)</span></span></span></span>。我们不妨设虚拟点的分级为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>min</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>A</mi><mo stretchy="false">)</mo><mo>+</mo><mi>max</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>B</mi><mo stretchy="false">)</mo></mrow><mn>2</mn></mfrac></mrow><annotation encoding="application/x-tex">\frac{\min(A)+\max(B)}{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.355em;vertical-align:-.345em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.6550000000000002em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mop mtight">min</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight">A</span><span class="mclose mtight">)</span><span class="mbin mtight">+</span><span class="mop mtight">max</span><span class="mopen mtight">(</span><span class="mord mathdefault mtight" style="margin-right:.05017em">B</span><span class="mclose mtight">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.345em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>，则信息转化为，上一级别的所有车站的分级大于虚拟点的分级，下一级别所有车站的分级小于虚拟点的分级，这样这道题的难点就解决了。</p><h3 id="最短路"><a class="markdownIt-Anchor" href="#最短路"></a> 最短路</h3><h4 id="textspfa优化"><a class="markdownIt-Anchor" href="#textspfa优化"></a> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>SPFA</mtext></mrow><annotation encoding="application/x-tex">\text{SPFA}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord text"><span class="mord">SPFA</span></span></span></span></span>优化</h4><p>被称为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>SLF(Small label first)</mtext></mrow><annotation encoding="application/x-tex">\text{SLF(Small label first)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">SLF(Small label first)</span></span></span></span></span>策略。若当前入队的顶点的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>dis</mtext></mrow><annotation encoding="application/x-tex">\text{dis}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">dis</span></span></span></span></span>比队头的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>dis</mtext></mrow><annotation encoding="application/x-tex">\text{dis}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.69444em;vertical-align:0"></span><span class="mord text"><span class="mord">dis</span></span></span></span></span>小，就将这个点从队头插入；否则插入队尾。在随机图上表现得不错，但是在恶意构造出的数据上会表现出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>O</mtext><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{O}(2^n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">O</span></span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.664392em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>的复杂度~~，死得更惨~~。</p><h4 id="道路重建"><a class="markdownIt-Anchor" href="#道路重建"></a> <a href="https://www.luogu.org/problemnew/show/P3905" target="_blank" rel="noopener">道路重建</a></h4><p>考虑把已经有公路连接的点缩成同一个点，重新建图跑最短路即可。</p><p>其实不需要重新建图，把完好的公路的权值改为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.64444em;vertical-align:0"></span><span class="mord">0</span></span></span></span>即可。</p><h4 id="ingred"><a class="markdownIt-Anchor" href="#ingred"></a> <a href="https://www.luogu.org/problemnew/show/SP18187" target="_blank" rel="noopener">INGRED</a></h4><p>最暴力的方法是先用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>Floyd</mtext></mrow><annotation encoding="application/x-tex">\text{Floyd}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.8888799999999999em;vertical-align:-.19444em"></span><span class="mord text"><span class="mord">Floyd</span></span></span></span></span>计算出任意两点间的最短路，再枚举两个人访问的特殊点，再枚举访问的顺序，更新答案即可。</p><p>比较好的方法是利用特殊点比较少的性质，从每个起点开始跑最短路。把每一个点的状态信息扩充，即把已经访问的特殊点记入点本身，或者说是“拆点”，把每一个点拆成<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mn>2</mn><mi>s</mi></msup></mrow><annotation encoding="application/x-tex">2^s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.664392em;vertical-align:0"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:.664392em"><span style="top:-3.063em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">s</span></span></span></span></span></span></span></span></span></span></span>个，点<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mtext>status</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,\text{status})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mopen">(</span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord text"><span class="mord">status</span></span><span class="mclose">)</span></span></span></span>表示到点<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault">x</span></span></span></span>且状态为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext>status</mtext></mrow><annotation encoding="application/x-tex">\text{status}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.61508em;vertical-align:0"></span><span class="mord text"><span class="mord">status</span></span></span></span></span>的最短路。最后枚举两个人分别走过的特殊点，直接计算答案即可。这样之所以能带来速度提升，是因为它把前面暴力方法中连续枚举（即复杂度相乘）的访问顺序变成了分开枚举（复杂度相加）。</p><p>计算特殊的最短路时，拆点时很重要的技巧。如<a href="https://www.luogu.org/problemnew/show/P4568" target="_blank" rel="noopener">飞行路线</a>。</p><br><section class="widget copyright desktop mobile"><div class="content"><blockquote><p>转载请标明出处，本文链接：<a href="https://sweetlemon39.github.io/NOIP2018-day3/">https://sweetlemon39.github.io/NOIP2018-day3/</a></p></blockquote></div></section></div><section class="meta" id="footer-meta"><div class="new-meta-box"><div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E7%AC%94%E8%AE%B0/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i>&nbsp;<p>笔记</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E5%9B%BE%E8%AE%BA/" rel="nofollow"><i class="fas fa-tag" aria-hidden="true"></i>&nbsp;<p>图论</p></a></div></div></section><div class="prev-next"><section class="prev"><span class="art-item-left"><h4><a href="/NOIP2018-day4/" rel="prev" title="NOIP 2018 集训 Day 4"><i class="fas fa-chevron-left" aria-hidden="true"></i> NOIP 2018 集训 Day 4</a></h4><h6 class="tags">&nbsp;<a class="tag" href="/tags/%E7%AC%94%E8%AE%B0/"><i class="fas fa-tag" aria-hidden="true"></i> 笔记</a> <a class="tag" href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/"><i class="fas fa-tag" aria-hidden="true"></i> 动态规划</a></h6></span></section><section class="next"><span class="art-item-right" aria-hidden="true"><h4><a href="/search/" rel="prev" title="搜索 总结">搜索 总结 <i class="fas fa-chevron-right" aria-hidden="true"></i></a></h4><h6 class="tags"><a class="tag" href="/tags/%E6%90%9C%E7%B4%A2/"><i class="fas fa-tag" aria-hidden="true"></i> 搜索</a> <a class="tag" href="/tags/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/"><i class="fas fa-tag" aria-hidden="true"></i> 算法浅解</a>&nbsp;</h6></span></section></div></section></article><article class="post white-box comments"><section class="article typo"><h4><i class="fas fa-comments fa-fw" aria-hidden="true"></i>&nbsp;评论</h4><section id="comments"><div id="valine_container" class="valine_thread"><i class="fas fa-spinner fa-spin fa-fw"></i></div></section></section></article><script type="text/x-mathjax-config">MathJax.Hub.Config({
    "HTML-CSS": {
      preferredFont: "TeX",
      availableFonts: ["STIX","TeX"],
      linebreaks: { automatic:true },
      EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
      inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
      processEscapes: true,
      ignoreClass: "tex2jax_ignore|dno",
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: { autoNumber: "AMS" },
      noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
      Macros: { href: "{}" }
    },
    messageStyle: "none"
  });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += (all[i].SourceElement().parentNode.className ? ' ' : '') + 'has-jax';
    }
  });</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>window.subData={title:"NOIP 2018 集训 Day 3",tools:!0}</script></div><aside class="l_side"><section class="widget blogger widget-blur desktop"><div class="content"><div class="avatar"><img class="avatar" src="https://cdn.jsdelivr.net/gh/mrj1018/OI/lemon.png"></div><div class="text"><h2>Sweetlemon</h2><p>一枚有趣的 OIer！</p></div><div class="social-wrapper"><a href="mailto:mrj1018@163.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://github.com/mrj1018" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://www.luogu.com.cn/user/25008" class="social fas fa-code flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div></div></section><section class="widget grid widget-blur desktop mobile"><header><i class="fas fa-map-signs fa-fw" aria-hidden="true"></i><span class="name">博客导航</span></header><div class="content"><ul class="grid navigation"><li><a class="flat-box" title="/" href="/" id="home"><i class="fas fa-home fa-fw" aria-hidden="true"></i> 博客主页</a></li><li><a class="flat-box" title="/categories/" href="/categories/" id="categories"><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i> 文章分类</a></li><li><a class="flat-box" title="/archives/" href="/archives/" id="archives"><i class="fas fa-archive fa-fw" aria-hidden="true"></i> 文章归档</a></li><li><a class="flat-box" title="/friends/" href="/friends/" id="friends"><i class="fas fa-users fa-fw" aria-hidden="true"></i> 博客友链</a></li><li><a class="flat-box" title="/comments/" href="/comments/" id="comments"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> 留言评论</a></li><li><a class="flat-box" title="/about/" href="/about/" id="about"><i class="fas fa-info-circle fa-fw" aria-hidden="true"></i> 关于博主</a></li></ul></div></section><section class="widget grid widget-blur desktop mobile"><header><a href="/useful-links/"><i class="fas fa-link fa-fw" aria-hidden="true"></i><span class="name">常用站导航</span></a></header><div class="content"><ul class="grid navigation"><li><a class="flat-box" title="https://oi-wiki.org/" href="https://oi-wiki.org/" rel="external nofollow noopener noreferrer" target="_blank" id="https:oi-wiki.org"><i class="fab fa-wikipedia-w fa-fw" aria-hidden="true"></i> OI Wiki</a></li><li><a class="flat-box" title="https://www.luogu.com.cn/" href="https://www.luogu.com.cn/" rel="external nofollow noopener noreferrer" target="_blank" id="https:www.luogu.com.cn"><i class="fas fa-code fa-fw" aria-hidden="true"></i> 洛谷</a></li><li><a class="flat-box" title="https://www.codeforces.com/" href="https://www.codeforces.com/" rel="external nofollow noopener noreferrer" target="_blank" id="https:www.codeforces.com"><i class="fas fa-code fa-fw" aria-hidden="true"></i> Codeforces</a></li><li><a class="flat-box" title="http://uoj.ac/" href="http://uoj.ac/" rel="external nofollow noopener noreferrer" target="_blank" id="http:uoj.ac"><i class="fas fa-code fa-fw" aria-hidden="true"></i> UOJ</a></li><li><a class="flat-box" title="https://loj.ac/" href="https://loj.ac/" rel="external nofollow noopener noreferrer" target="_blank" id="https:loj.ac"><i class="fas fa-code fa-fw" aria-hidden="true"></i> LOJ</a></li><li><a class="flat-box" title="http://www.noi.cn/" href="http://www.noi.cn/" rel="external nofollow noopener noreferrer" target="_blank" id="http:www.noi.cn"><i class="fa fa-code fa-fw" aria-hidden="true"></i> CCF NOI</a></li></ul></div></section><section class="widget category widget-blur desktop"><header><a href="/categories/"><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i><span class="name">文章分类</span></a></header><div class="content"><ul class="entry navigation"><li><a class="flat-box" title="/categories/%E5%8D%B3%E6%97%B6%E7%AC%94%E8%AE%B0/" href="/categories/%E5%8D%B3%E6%97%B6%E7%AC%94%E8%AE%B0/" id="categoriesE58DB3E697B6E7AC94E8AEB0"><div class="name">即时笔记</div><div class="badge">(10)</div></a></li><li><a class="flat-box" title="/categories/%E6%80%BB%E7%BB%93/" href="/categories/%E6%80%BB%E7%BB%93/" id="categoriesE680BBE7BB93"><div class="name">总结</div><div class="badge">(2)</div></a></li><li><a class="flat-box" title="/categories/%E7%A9%BF%E9%80%8F%E4%B8%96%E7%95%8C%E8%BE%B9%E7%BC%98%E7%9A%84%E5%91%90%E5%96%8A/" href="/categories/%E7%A9%BF%E9%80%8F%E4%B8%96%E7%95%8C%E8%BE%B9%E7%BC%98%E7%9A%84%E5%91%90%E5%96%8A/" id="categoriesE7A9BFE9808FE4B896E7958CE8BEB9E7BC98E79A84E59190E5968A"><div class="name">穿透世界边缘的呐喊</div><div class="badge">(3)</div></a></li><li><a class="flat-box" title="/categories/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/" href="/categories/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/" id="categoriesE7AE97E6B395E6B585E8A7A3"><div class="name">算法浅解</div><div class="badge">(10)</div></a></li><li><a class="flat-box" title="/categories/%E9%9A%8F%E7%AC%94/" href="/categories/%E9%9A%8F%E7%AC%94/" id="categoriesE99A8FE7AC94"><div class="name">随笔</div><div class="badge">(5)</div></a></li></ul></div></section><section class="widget tagcloud widget-blur desktop"><header><a href="/tags/"><i class="fas fa-tags fa-fw" aria-hidden="true"></i><span class="name">热门标签</span></a></header><div class="content"><a href="/tags/KMP/" style="font-size:14px;color:#999">KMP</a> <a href="/tags/THUWC/" style="font-size:14px;color:#999">THUWC</a> <a href="/tags/floyd/" style="font-size:14px;color:#999">floyd</a> <a href="/tags/gcd/" style="font-size:14px;color:#999">gcd</a> <a href="/tags/%E4%B8%96%E7%95%8C%E9%97%B4%E7%BB%AA%E8%AE%BA/" style="font-size:14px;color:#999">世界间绪论</a> <a href="/tags/%E4%B8%96%E7%95%8C%E9%97%B4%E8%AF%84%E8%AE%BA/" style="font-size:16px;color:#8b8b8b">世界间评论</a> <a href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE/" style="font-size:14px;color:#999">二分图</a> <a href="/tags/%E4%BD%A0%E7%9A%84%E5%90%8D%E5%AD%97/" style="font-size:14px;color:#999">你的名字</a> <a href="/tags/%E5%89%8D%E7%BC%80%E5%92%8C/" style="font-size:14px;color:#999">前缀和</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size:18px;color:#7e7e7e">动态规划</a> <a href="/tags/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/" style="font-size:14px;color:#999">单调队列</a> <a href="/tags/%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84/" style="font-size:14px;color:#999">后缀数组</a> <a href="/tags/%E5%9B%BE%E8%AE%BA/" style="font-size:22px;color:#636363">图论</a> <a href="/tags/%E5%A4%A7%E7%BA%B2/" style="font-size:14px;color:#999">大纲</a> <a href="/tags/%E5%A5%87%E9%97%BB/" style="font-size:14px;color:#999">奇闻</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size:20px;color:#707070">字符串</a> <a href="/tags/%E5%B7%AE%E5%88%86/" style="font-size:14px;color:#999">差分</a> <a href="/tags/%E5%B9%B6%E6%9F%A5%E9%9B%86/" style="font-size:14px;color:#999">并查集</a> <a href="/tags/%E6%80%BB%E7%BB%93/" style="font-size:14px;color:#999">总结</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size:14px;color:#999">排序</a> <a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size:18px;color:#7e7e7e">搜索</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:22px;color:#636363">数学</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:20px;color:#707070">数据结构</a> <a href="/tags/%E6%A0%91/" style="font-size:16px;color:#8b8b8b">树</a> <a href="/tags/%E7%A6%BB%E7%BA%BF/" style="font-size:14px;color:#999">离线</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size:24px;color:#555">笔记</a> <a href="/tags/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/" style="font-size:24px;color:#555">算法浅解</a> <a href="/tags/%E7%B4%AB%E7%BD%97%E5%85%B0%E6%B0%B8%E6%81%92%E8%8A%B1%E5%9B%AD/" style="font-size:14px;color:#999">紫罗兰永恒花园</a> <a href="/tags/%E8%92%9F%E8%92%BB/" style="font-size:14px;color:#999">蒟蒻</a> <a href="/tags/%E8%B4%AA%E5%BF%83/" style="font-size:16px;color:#8b8b8b">贪心</a> <a href="/tags/%E9%80%80%E5%BD%B9/" style="font-size:14px;color:#999">退役</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size:16px;color:#8b8b8b">随笔</a></div></section><section class="widget toc-wrapper widget-blur desktop mobile"><header><i class="fas fa-list fa-fw" aria-hidden="true"></i><span class="name">本文目录</span></header><div class="content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#图论"><span class="toc-text">图论</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#图的存储"><span class="toc-text">图的存储</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#图的遍历"><span class="toc-text">图的遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#textbfs"><span class="toc-text">bfs\text{bfs}bfs</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#障碍路线"><span class="toc-text">障碍路线</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#最优贸易"><span class="toc-text">最优贸易</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#关押罪犯"><span class="toc-text">关押罪犯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#textdag"><span class="toc-text">DAG\text{DAG}DAG</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#车站分级"><span class="toc-text">车站分级</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#最短路"><span class="toc-text">最短路</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#textspfa优化"><span class="toc-text">SPFA\text{SPFA}SPFA优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#道路重建"><span class="toc-text">道路重建</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ingred"><span class="toc-text">INGRED</span></a></li></ol></li></ol></li></ol></div></section></aside><footer class="clearfix"><br><br><div class="aplayer-container"><meting-js theme="#1BCDFC" autoplay volume="0.7" loop order="list" fixed="false" list-max-height="340px" server="netease" type="song" id="551339691" list-folded="true"></meting-js></div><br><div class="social-wrapper"><a href="mailto:mrj1018@163.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://github.com/mrj1018" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://www.luogu.com.cn/user/25008" class="social fas fa-code flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div><div class="copyright"><p><a href="https://sweetlemon39.github.io">By Sweetlemon</a></p></div></footer><script>setLoadingBarProgress(80)</script><script>setLoadingBarProgress(60)</script></div><a class="s-top fas fa-arrow-up fa-fw" href="javascript:void(0)"></a></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><script>var SEARCH_SERVICE="hexo",ROOT="/";ROOT.endsWith("/")||(ROOT+="/")</script><script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.7.4/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script><script async src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script><script async src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js" async></script><script type="text/javascript">$(function(){Waves.attach(".flat-btn",["waves-button"]),Waves.attach(".float-btn",["waves-button","waves-float"]),Waves.attach(".float-btn-light",["waves-button","waves-float","waves-light"]),Waves.attach(".flat-box",["waves-block"]),Waves.attach(".float-box",["waves-block","waves-float"]),Waves.attach(".waves-image"),Waves.init()})</script><script src="//cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script><script type="text/javascript">$(function(){var e=["https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/vc_247324.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/violet_259998.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__07.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__06.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__03.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/your_name_233767.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__05.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/kagerou_183538.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_262935.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__01.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/tianyi_221481.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_289028.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/kagerou_184531.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/ia_292142.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/vc_184412.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/tianyi_229042.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__02.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_288524.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__04.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/anohana_172855.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_279631.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__08.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/kagerou_191672.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/violet_261791.jpg"];!function(e){for(var t=e.length;t--;){var g=Math.floor(Math.random()*t),i=e[g];e[g]=e[t],e[t]=i}}(e),$.backstretch(e,{duration:"20000",fade:"2500"})})</script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.7.4/js/valine.js"></script><script>var GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(i){return-1<GUEST_INFO.indexOf(i)}),notify=!1,verify=!1,valine=new Valine;valine.init({el:"#valine_container",notify:notify,verify:verify,guest_info:guest_info,appId:"uzT4lXHwcPJOlEGevXF7jqRU-gzGzoHsz",appKey:"vVl1bqbOX0WUiA9WFlFhMxBb",placeholder:"快来评论吧~",pageSize:"10",avatar:"mp",lang:"zh-cn",visitor:"false",highlight:"true"})</script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.7.4/js/app.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.7.4/js/search.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@1.7.4/js/comment_typing.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script>let COPY_SUCCESS = "复制成功";
  let COPY_FAILURE = "复制失败";
  /*页面载入完成后，创建复制按钮*/
  !function (e, t, a) {
    /* code */
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '  <i class="fa fa-copy"></i><span>复制</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });

      clipboard.on('success', function(e) {
        //您可以加入成功提示
        console.info('Action:', e.action);
        console.info('Text:', e.text);
        console.info('Trigger:', e.trigger);
        success_prompt(COPY_SUCCESS);
        e.clearSelection();
      });
      clipboard.on('error', function(e) {
        //您可以加入失败提示
        console.error('Action:', e.action);
        console.error('Trigger:', e.trigger);
        fail_prompt(COPY_FAILURE);
      });
    }
    initCopyCode();

  }(window, document);

  /**
   * 弹出式提示框，默认1.5秒自动消失
   * @param message 提示信息
   * @param style 提示样式，有alert-success、alert-danger、alert-warning、alert-info
   * @param time 消失时间
   */
  var prompt = function (message, style, time)
  {
      style = (style === undefined) ? 'alert-success' : style;
      time = (time === undefined) ? 1500 : time*1000;
      $('<div>')
          .appendTo('body')
          .addClass('alert ' + style)
          .html(message)
          .show()
          .delay(time)
          .fadeOut();
  };

  // 成功提示
  var success_prompt = function(message, time)
  {
      prompt(message, 'alert-success', time);
  };

  // 失败提示
  var fail_prompt = function(message, time)
  {
      prompt(message, 'alert-danger', time);
  };

  // 提醒
  var warning_prompt = function(message, time)
  {
      prompt(message, 'alert-warning', time);
  };

  // 信息提示
  var info_prompt = function(message, time)
  {
      prompt(message, 'alert-info', time);
  };</script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script>let LAZY_LOAD_IMAGE = "";
  $(".article-entry").find("fancybox").find("img").each(function () {
      var element = document.createElement("a");
      $(element).attr("data-fancybox", "gallery");
      $(element).attr("href", $(this).attr("src"));
      /* 图片采用懒加载处理时,
       * 一般图片标签内会有个属性名来存放图片的真实地址，比如 data-original,
       * 那么此处将原本的属性名src替换为对应属性名data-original,
       * 修改如下
       */
       if (LAZY_LOAD_IMAGE) {
         $(element).attr("href", $(this).attr("data-original"));
       }
      $(this).wrap(element);
  });</script><script>setLoadingBarProgress(100)</script></body></html>