<!DOCTYPE html><html><head hexo-theme="https://volantis.js.org/#2.6.5"><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title>朝花中学OI队的奋斗历程——浅谈单调队列 - Sweetlemon 的异世界</title><meta name="keywords" content="数据结构,算法浅解,单调队列"><meta name="description" content=" 问题背景朝花中学是市里有名的OI强校，每年朝花中学都要选一名队员代表学校参加市里的OI联赛，这名参赛队员可从初一到高二的所有选手中选拔（高三不能比赛……）。校队教练nomelteews想要给这些高手更好的培养机会，于是决定成立朝花集训队，给予集训队里的选手以特殊指导，并直接从集训队中选队员参加联赛。"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.css"><link rel="shortcut icon" type="image/x-icon" href="https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/avatar.png"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css"><link rel="stylesheet" href="/css/style.css"><script>function setLoadingBarProgress(e){document.getElementById("loading-bar").style.width=e+"%"}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body)"></script></head><body><div id="loading-bar-wrapper"><div id="loading-bar"></div></div><header class="l_header shadow blur"><div class="container"><div class="wrapper"><div class="nav-sub"><p class="title"></p><ul class="switcher nav-list-h"><li><a class="s-comment fas fa-comments fa-fw" target="_self" href="javascript:void(0)"></a></li><li><a class="s-toc fas fa-list fa-fw" target="_self" href="javascript:void(0)"></a></li></ul></div><div class="nav-main"><a class="title flat-box" target="_self" href="/">Sweetlemon 的异世界</a><div class="menu navigation"><ul class="nav-list-h"><li><a class="flat-box" href="/" id="home"><i class="fas fa-home fa-fw"></i>主页</a></li><li><a class="flat-box" href="/categories/" id="categories"><i class="fas fa-folder-open fa-fw"></i>分类</a></li><li><a class="flat-box" href="/archives/" id="archives"><i class="fas fa-archive fa-fw"></i>归档</a></li><li><a class="flat-box" href="/about/" id="about"><i class="fas fa-info-circle fa-fw"></i>关于</a></li></ul></div><div class="m_search"><form name="searchform" class="form u-search-form"><i class="icon fas fa-search fa-fw"></i> <input type="text" class="input u-search-input" placeholder="一直在寻找着你"></form></div><ul class="switcher nav-list-h"><li><a class="s-search fas fa-search fa-fw" target="_self" href="javascript:void(0)"></a></li><li><a class="s-menu fas fa-bars fa-fw" target="_self" href="javascript:void(0)"></a><ul class="menu-phone list-v navigation white-box"><li><a class="flat-box" href="/" id="home"><i class="fas fa-home fa-fw"></i>主页</a></li><li><a class="flat-box" href="/categories/" id="categories"><i class="fas fa-folder-open fa-fw"></i>分类</a></li><li><a class="flat-box" href="/archives/" id="archives"><i class="fas fa-archive fa-fw"></i>归档</a></li><li><a class="flat-box" href="/about/" id="about"><i class="fas fa-info-circle fa-fw"></i>关于</a></li></ul></li></ul></div></div></div></header><script>setLoadingBarProgress(40)</script><div class="l_body nocover"><div class="body-wrapper"><div class="l_main"><article id="post" class="post white-box reveal shadow article-type-post" itemscope itemprop="blogPost"><section class="meta"><div class="meta" id="header-meta"><h1 class="title"><a href="/monotonous-queue/">朝花中学OI队的奋斗历程——浅谈单调队列</a></h1><div class="new-meta-box"><div class="new-meta-item author"><a href="https://sweetlemon39.github.io/" rel="nofollow"><img src="https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/avatar.png"><p>Sweetlemon</p></a></div><div class="new-meta-item category"><a href="/categories/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/" rel="nofollow"><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i><p>算法浅解</p></a></div><div class="new-meta-item date"><a class="notlink"><i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i><p>发布于：2018年7月15日</p></a></div><div class="new-meta-item date" itemprop="dateUpdated" datetime="2018-07-15T00:00:00+00:00"><a class="notlink"><i class="fas fa-edit fa-fw" aria-hidden="true"></i><p>更新于：2018年7月15日</p></a></div></div><hr></div></section><section class="article typo"><div class="article-entry" itemprop="articleBody"><h3 id="问题背景"><a class="markdownIt-Anchor" href="#问题背景"></a> 问题背景</h3><p>朝花中学是市里有名的OI强校，每年朝花中学都要选<strong>一名</strong>队员代表学校参加市里的OI联赛，这名参赛队员可从初一到高二的所有选手中选拔（高三不能比赛……）。校队教练nomelteews想要给这些高手更好的培养机会，于是决定成立朝花集训队，给予集训队里的选手以特殊指导，并直接从集训队中选队员参加联赛。</p><a id="more"></a><p>为了保证教学效果，nomelteews要始终让集训队的总人数最少，但每年比赛时又必须从队里挑出全校最强的队员参赛。nomelteews每年只能从初一新生中选拔集训队新队员，那么，应吸纳哪些人入队呢？</p><h3 id="问题思路"><a class="markdownIt-Anchor" href="#问题思路"></a> 问题思路</h3><p>nomelteews每年对申请入队的初一新生进行一次综合能力测评，以测评成绩作为判断OI能力强弱的依据。下面是部分测评成绩表。</p><table><thead><tr><th style="text-align:center">年份</th><th style="text-align:center">姓名</th><th style="text-align:center">成绩</th></tr></thead><tbody><tr><td style="text-align:center">2012</td><td style="text-align:center">evets</td><td style="text-align:center">450</td></tr><tr><td style="text-align:center">2013</td><td style="text-align:center">ayohs</td><td style="text-align:center">420</td></tr><tr><td style="text-align:center">2013</td><td style="text-align:center">ugoul</td><td style="text-align:center">520</td></tr><tr><td style="text-align:center">2013</td><td style="text-align:center">anuzan</td><td style="text-align:center">350</td></tr><tr><td style="text-align:center">2014</td><td style="text-align:center">ikat</td><td style="text-align:center">500</td></tr><tr><td style="text-align:center">2014</td><td style="text-align:center">xela</td><td style="text-align:center">460</td></tr><tr><td style="text-align:center">2015</td><td style="text-align:center">okohs</td><td style="text-align:center">480</td></tr><tr><td style="text-align:center">2015</td><td style="text-align:center">repeerc</td><td style="text-align:center">400</td></tr><tr><td style="text-align:center">2016</td><td style="text-align:center">ahustim</td><td style="text-align:center">480</td></tr><tr><td style="text-align:center">2016</td><td style="text-align:center">umier</td><td style="text-align:center">440</td></tr><tr><td style="text-align:center">2017</td><td style="text-align:center">amnem</td><td style="text-align:center">470</td></tr><tr><td style="text-align:center">2017</td><td style="text-align:center">natnij</td><td style="text-align:center">430</td></tr><tr><td style="text-align:center">2018</td><td style="text-align:center">ukim</td><td style="text-align:center">460</td></tr><tr><td style="text-align:center">2018</td><td style="text-align:center">ilib</td><td style="text-align:center">450</td></tr></tbody></table><p>最简单的想法就是——让所有人入队！但是这显然不能满足总人数最少的要求。</p><p>进一步的想法是，让每年成绩最好的人入队。例如2013年的3名选手中，ugoul的成绩最好，就在这三人中选ugoul入队。理由是，只要是ayohs和anuzan能参加的比赛，ugoul也能参加；而ugoul的能力比ayohs和anuzan都强，所以有理由淘汰ayohs和anuzan。</p><p>那么按这个思路，剩下的人就是：</p><table><thead><tr><th style="text-align:center">年份</th><th style="text-align:center">姓名</th><th style="text-align:center">成绩</th></tr></thead><tbody><tr><td style="text-align:center">2012</td><td style="text-align:center">evets</td><td style="text-align:center">450</td></tr><tr><td style="text-align:center">2013</td><td style="text-align:center">ugoul</td><td style="text-align:center">520</td></tr><tr><td style="text-align:center">2014</td><td style="text-align:center">ikat</td><td style="text-align:center">500</td></tr><tr><td style="text-align:center">2015</td><td style="text-align:center">okohs</td><td style="text-align:center">480</td></tr><tr><td style="text-align:center">2016</td><td style="text-align:center">ahustim</td><td style="text-align:center">480</td></tr><tr><td style="text-align:center">2017</td><td style="text-align:center">amnem</td><td style="text-align:center">470</td></tr><tr><td style="text-align:center">2018</td><td style="text-align:center">ukim</td><td style="text-align:center">460</td></tr></tbody></table><p>这样队里最多同时有5人，每年最早入队的人会退役，参加比赛时只要从5人中找出能力最强的人就好了，看起来效率相当不错。</p><p>那么，队的人数能不能更少呢？一个大胆的想法是，只留当前遇到的最强的队员在队里！那么队里的情况就是：</p><table><thead><tr><th style="text-align:center">年份</th><th style="text-align:center">队员</th><th style="text-align:center">成绩</th></tr></thead><tbody><tr><td style="text-align:center">2012</td><td style="text-align:center">evets</td><td style="text-align:center">450</td></tr><tr><td style="text-align:center">2013-2017</td><td style="text-align:center">ugoul</td><td style="text-align:center">520</td></tr><tr><td style="text-align:center">2018</td><td style="text-align:center">ukim</td><td style="text-align:center">460</td></tr></tbody></table><p>然而，如果按这个标准选拔，由于最强的ugoul必须在2017年末退役，因此2018年的比赛只能由当年最强的ukim（460分）来比赛。按照上一个方案，2018年的比赛可以由ikat（500分）参赛，显然如果采用这个方案，最强的队员退役后会造成尴尬局面。</p><p>还有什么办法吗？大自然的法则——优胜劣汰也许能给我们一点启示。我们来一年一年看。</p><p>2012年，只有evets申请入队，无疑只能让evets一人进队。那么2012年的比赛当然就由他来参加啦！</p><table><thead><tr><th style="text-align:center">入队年份</th><th style="text-align:center">队员</th><th style="text-align:center">成绩</th><th style="text-align:center">参赛(*)</th></tr></thead><tbody><tr><td style="text-align:center">2012</td><td style="text-align:center">evets</td><td style="text-align:center">450</td><td style="text-align:center">*</td></tr></tbody></table><p>2013年，当年最强的是ugoul。此时，我们可以淘汰evets。为什么呢？2013年以后，evets只能参加2013<sub>2016年的比赛，而ugoul却能参加2013</sub>2017年的比赛，也就是说凡是evets可以参加的比赛，ugoul都可以参加；而ugoul又比evets强，因此淘汰evets。当年的比赛由ugoul参加。</p><table><thead><tr><th style="text-align:center">入队年份</th><th style="text-align:center">队员</th><th style="text-align:center">成绩</th><th style="text-align:center">参赛(*)</th></tr></thead><tbody><tr><td style="text-align:center">2013</td><td style="text-align:center">ugoul</td><td style="text-align:center">520</td><td style="text-align:center">*</td></tr></tbody></table><p>2014年，当年最强的是ikat。ikat没有ugoul强，他能不能入队呢？我们来看：ugoul能参加2014<sub>2017年的比赛，而ikat能参加2014</sub>2018年的比赛，ikat能参加的比赛比ugoul多，因此仍要接纳ikat入队。事实上，根据我们先前的判断，2018年的比赛是要由ikat参加的。但是2014年的比赛还是要由队里最强的ugoul参加。</p><table><thead><tr><th style="text-align:center">入队年份</th><th style="text-align:center">队员</th><th style="text-align:center">成绩</th><th style="text-align:center">参赛(*)</th></tr></thead><tbody><tr><td style="text-align:center">2013</td><td style="text-align:center">ugoul</td><td style="text-align:center">520</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">2014</td><td style="text-align:center">ikat</td><td style="text-align:center">500</td><td style="text-align:center"> </td></tr></tbody></table><p>2015年，类似以上讨论，okohs可以入队。而当年的比赛仍然由ugoul参加（<s>队霸</s>大佬）。</p><table><thead><tr><th style="text-align:center">入队年份</th><th style="text-align:center">队员</th><th style="text-align:center">成绩</th><th style="text-align:center">参赛(*)</th></tr></thead><tbody><tr><td style="text-align:center">2013</td><td style="text-align:center">ugoul</td><td style="text-align:center">520</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">2014</td><td style="text-align:center">ikat</td><td style="text-align:center">500</td><td style="text-align:center"> </td></tr><tr><td style="text-align:center">2015</td><td style="text-align:center">okohs</td><td style="text-align:center">480</td><td style="text-align:center"> </td></tr></tbody></table><p>2016年，ahustim（480分）入队。她要淘汰okohs，因为okohs她虽然能力和ahustim相同，但是比ahustim早退役（还是那句话，凡是okohs能参加的比赛ahustim都能参加），因此okohs只好提前退役了。当年的比赛由ugoul参加。</p><table><thead><tr><th style="text-align:center">入队年份</th><th style="text-align:center">队员</th><th style="text-align:center">成绩</th><th style="text-align:center">参赛(*)</th></tr></thead><tbody><tr><td style="text-align:center">2013</td><td style="text-align:center">ugoul</td><td style="text-align:center">520</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">2014</td><td style="text-align:center">ikat</td><td style="text-align:center">500</td><td style="text-align:center"> </td></tr><tr><td style="text-align:center">2016</td><td style="text-align:center">ahustim</td><td style="text-align:center">480</td><td style="text-align:center"> </td></tr></tbody></table><p>2017年队里的情况如下：</p><table><thead><tr><th style="text-align:center">入队年份</th><th style="text-align:center">队员</th><th style="text-align:center">成绩</th><th style="text-align:center">参赛(*)</th></tr></thead><tbody><tr><td style="text-align:center">2013</td><td style="text-align:center">ugoul</td><td style="text-align:center">520</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">2014</td><td style="text-align:center">ikat</td><td style="text-align:center">500</td><td style="text-align:center"> </td></tr><tr><td style="text-align:center">2016</td><td style="text-align:center">ahustim</td><td style="text-align:center">480</td><td style="text-align:center"> </td></tr><tr><td style="text-align:center">2017</td><td style="text-align:center">amnem</td><td style="text-align:center">470</td><td style="text-align:center"> </td></tr></tbody></table><p>到了2018年，队里的情况有变——ugoul退役了！这样当年的比赛就要让ikat参加了。当年情况如下：</p><table><thead><tr><th style="text-align:center">入队年份</th><th style="text-align:center">队员</th><th style="text-align:center">成绩</th><th style="text-align:center">参赛(*)</th></tr></thead><tbody><tr><td style="text-align:center">2014</td><td style="text-align:center">ikat</td><td style="text-align:center">500</td><td style="text-align:center">*</td></tr><tr><td style="text-align:center">2016</td><td style="text-align:center">ahustim</td><td style="text-align:center">480</td><td style="text-align:center"> </td></tr><tr><td style="text-align:center">2017</td><td style="text-align:center">amnem</td><td style="text-align:center">470</td><td style="text-align:center"> </td></tr><tr><td style="text-align:center">2018</td><td style="text-align:center">ukim</td><td style="text-align:center">460</td><td style="text-align:center"> </td></tr></tbody></table><h3 id="问题总结"><a class="markdownIt-Anchor" href="#问题总结"></a> 问题总结</h3><p>仔细观察这些表格，我们发现，这些表格具有以下特点：</p><p>①每年只有一人入队；②队里队员的成绩总是随着年份的增加而单调递减；③每年总是由最老的队员（当然也是最强的）参赛；④每年只有最多1人——最老的队员退役。</p><p>这个集训队其实具有类似（双端）队列的结构——每年新队员加入时从队尾淘汰，从队尾入队；每年参赛时取队头；每年退役时只有队头退役；而它又具有单调递减的特殊性，因此我们把这样的队列称为<strong>单调队列</strong>。</p><p>单调队列有什么作用呢？它可以解决下面被称为“滑动窗口”的问题。</p><p>如下图，给出一个长度为n的序列A，求A中所有长度为m的连续子序列的最大值。下图中假设n=7，m=3。</p><p><img src="https://cdn.luogu.com.cn/upload/pic/23633.png" alt="滑动窗口解释"></p><p>这题只需枚举每个连续子序列，使用单调队列得出最大值即可。我们看看单调队列是怎么工作的。</p><p>这个集训队每年在做的事情就是单调队列的操作。</p><ol><li>入队/滑动窗口右滑。每年选拔新队员时，淘汰比这名新队员弱的老队员。对于单调队列，就是插入新元素时，把先前存在的比当前元素小的元素弹出（从队尾退队）。</li><li>退役/滑动窗口右滑。只需判断最老的队员是否需要退队。对于单调队列，只需判断队头是否已经超出滑动窗口范围，若超出，则从队头退队。</li><li>参赛/查询滑动窗口最大值。直接派最老的队员参赛/直接返回队头元素。</li></ol><p>我们手工模拟一下这个单调队列的工作过程吧（如下表）！</p><table><thead><tr><th style="text-align:center">时刻</th><th style="text-align:center">入队元素</th><th style="text-align:center">入队后队列</th><th style="text-align:center">最大值</th></tr></thead><tbody><tr><td style="text-align:center">1</td><td style="text-align:center">5</td><td style="text-align:center">5</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">2</td><td style="text-align:center">3</td><td style="text-align:center">5 3</td><td style="text-align:center">-</td></tr><tr><td style="text-align:center">3</td><td style="text-align:center">2</td><td style="text-align:center">5 3 2</td><td style="text-align:center">5</td></tr><tr><td style="text-align:center">4</td><td style="text-align:center">1</td><td style="text-align:center">3 2 1</td><td style="text-align:center">3</td></tr><tr><td style="text-align:center">5</td><td style="text-align:center">0</td><td style="text-align:center">2 1 0</td><td style="text-align:center">2</td></tr><tr><td style="text-align:center">6</td><td style="text-align:center">7</td><td style="text-align:center">7</td><td style="text-align:center">7</td></tr><tr><td style="text-align:center">7</td><td style="text-align:center">8</td><td style="text-align:center">8</td><td style="text-align:center">8</td></tr></tbody></table><p>分析单调队列的时间复杂度，每个元素最多入队1次、出队1次，且出入队都是O(1)的，因此这是一个总时间O(n)的算法。这样相对高效的算法，能为我们解决动态规划问题提供有力的优化，例如<a href="https://www.luogu.org/problemnew/show/P3957" target="_blank" rel="noopener">NOIP 2017普及组的第4题</a>就可以使用单调队列，此处不再叙述，如果有兴趣可以在理解单调队列的概念后看一看题解。</p><h3 id="代码实现"><a class="markdownIt-Anchor" href="#代码实现"></a> 代码实现</h3><p>单调队列可以用STL的deque实现，也可以手写数组实现。由于每个元素最多入队一次、出队一次，手写数组的大小只要和原数组一样就可以了（也就是和元素总数相等即可）。</p><p>下面分别给出deque实现和数组实现的C++代码，输入输出格式见<a href="https://www.luogu.org/problemnew/show/P1440" target="_blank" rel="noopener">单调队列模板题P1440</a> （当然这题也有其他不错的解法）。与上述讨论不同的是，本题输出的是滑动窗口内的最<strong>小</strong>值。</p><p>两种实现效率比较：总时间 deque 1660ms，deque(O2) 1100ms, 手写数组实现 908ms。看来有时还是需要手写数组的！</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//deque实现</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt; // 提供deque</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 2000005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Num</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> index,x;<span class="comment">//需要记录单调队列内每个数的入队时间(index)和大小(x)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[MAXN]; <span class="comment">//原数组</span></span><br><span class="line"><span class="built_in">deque</span>&lt;Num&gt; q; <span class="comment">//单调队列 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,m; <span class="comment">//n表示序列长度，m表示滑动窗口长度</span></span><br><span class="line">    Num t;<span class="comment">//保存当前元素</span></span><br><span class="line">    <span class="comment">//输入</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">    <span class="comment">//问题解决</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="comment">//先输出数a[i]前的最小值</span></span><br><span class="line">        <span class="keyword">if</span> (q.empty()) <span class="comment">//q空，即a[i]前没有元素</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"0\n"</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">//否则判断队头是否需要出队并输出范围内的队头</span></span><br><span class="line">            <span class="keyword">if</span> (q.front().index+m&lt;i) <span class="comment">//队头已经超出滑动窗口范围</span></span><br><span class="line">                q.pop_front(); <span class="comment">// 弹出队头</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,q.front().x); <span class="comment">//此时队一定非空（想想为什么）</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> ((!q.empty()) &amp;&amp; q.back().x&gt;=a[i]) </span><br><span class="line">        <span class="comment">//当队列非空时，不断弹出队尾比当前元素大的元素</span></span><br><span class="line">            q.pop_back();</span><br><span class="line">        t.index=i;</span><br><span class="line">        t.x=a[i];</span><br><span class="line">        q.push_back(t);<span class="comment">//将当前元素入队</span></span><br><span class="line">        <span class="comment">//注意：当前元素无论如何都会入队（想想为什么）</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//数组实现</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAXN 2000005</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Num</span>&#123;</span></span><br><span class="line">    <span class="keyword">int</span> index,x;<span class="comment">//需要记录单调队列内每个数的入队时间(index)和大小(x)</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[MAXN]; <span class="comment">//原数组</span></span><br><span class="line">Num q[MAXN]; <span class="comment">//单调队列 </span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> n,m; <span class="comment">//n表示序列长度，m表示滑动窗口长度</span></span><br><span class="line">    <span class="keyword">int</span> front,back; <span class="comment">//front,back分别表示队头、队尾位置</span></span><br><span class="line">    <span class="comment">//输入</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line">    <span class="comment">//问题解决</span></span><br><span class="line">    front=<span class="number">1</span>;</span><br><span class="line">    back=<span class="number">0</span>;<span class="comment">//初始化队头队尾位置，队头&gt;队尾表示队空</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)&#123;</span><br><span class="line">        <span class="comment">//先输出数a[i]前的最小值</span></span><br><span class="line">        <span class="keyword">if</span> (front&gt;back) <span class="comment">//q空，即a[i]前没有元素</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"0\n"</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123; <span class="comment">//否则判断队头是否需要出队并输出范围内的队头</span></span><br><span class="line">            <span class="keyword">if</span> (q[front].index+m&lt;i) <span class="comment">//队头已经超出滑动窗口范围</span></span><br><span class="line">                front++; <span class="comment">// 弹出队头</span></span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>,q[front].x); <span class="comment">//此时队一定非空（想想为什么）</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span> (front&lt;=back &amp;&amp; q[back].x&gt;=a[i]) </span><br><span class="line">        <span class="comment">//当队列非空时，不断弹出队尾比当前元素大的元素</span></span><br><span class="line">            back--;</span><br><span class="line">        back++;</span><br><span class="line">        q[back].x=a[i];</span><br><span class="line">        q[back].index=i;<span class="comment">//将当前元素入队</span></span><br><span class="line">        <span class="comment">//注意：当前元素无论如何都会入队（想想为什么）</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="练习与最后的废话"><a class="markdownIt-Anchor" href="#练习与最后的废话"></a> 练习<s>与最后的废话</s></h3><p>涉及单调队列的题目直接在洛谷<a href="https://www.luogu.org/problemnew/lists?orderitem=difficulty&amp;tag=56" target="_blank" rel="noopener">搜索</a>就可以找到一些,这两题（<a href="https://www.luogu.org/problemnew/show/P1886" target="_blank" rel="noopener">P1886 滑动窗口</a>和<a href="https://www.luogu.org/problemnew/show/P1440" target="_blank" rel="noopener">P1440 求m区间内的最小值</a>）是模板题。（但是“P2952 牛线”不是单调队列的题目！）</p><p>其实多重背包问题（有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathnormal">n</span></span></span></span>种物品，每种物品有<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.58056em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.31166399999999994em"><span style="top:-2.5500000000000003em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>个，每种物品的价值为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>w</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">w_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.58056em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.02691em">w</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.31166399999999994em"><span style="top:-2.5500000000000003em;margin-left:-.02691em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>，每种物品的体积为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>v</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">v_{i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.58056em;vertical-align:-.15em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:.03588em">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.31166399999999994em"><span style="top:-2.5500000000000003em;margin-left:-.03588em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15em"><span></span></span></span></span></span></span></span></span></span>，现有一个容量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span></span></span></span>的背包，要求装进背包里的物品的总体积不超过<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.68333em;vertical-align:0"></span><span class="mord mathnormal" style="margin-right:.07153em">C</span></span></span></span>，求装入背包的物品的总价值的最大值）的优化也可以用到单调队列，使用后时间复杂度变为O(VN)。可参考<a href="https://blog.csdn.net/FSAHFGSADHSAKNDAS/article/details/52825227" target="_blank" rel="noopener">这篇文章</a>。</p><p>其实朝花中学有必要考虑换个教练了～大家有没有发现，这个教练有两个问题：其一，进队后队员的水平并没有得到提升，和刚进队时完全一样；其二，招来的队员水平在单调递减……</p><p>相比之下，我们都是幸运的。朝花中学队员们的水平在入队后就无法改变，而我们在加入了OIer的队伍后，依然可以通过学习，不断提高自己的知识水平。因此，我们真的要珍惜学习的机会啊！</p><p>最后还是祝愿大家成为像ugoul一样的<s>队霸</s>大佬！</p><div class="article_footer"><section class="widget copyright desktop mobile"><div class="content"><blockquote><p>本文永久链接是：<a href="https://sweetlemon39.github.io/monotonous-queue/">https://sweetlemon39.github.io/monotonous-queue/</a></p></blockquote></div></section></div></div><section class="meta" id="footer-meta"><div class="new-meta-box"><div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>数据结构</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>算法浅解</p></a></div><div class="new-meta-item meta-tags"><a class="tag" href="/tags/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/" rel="nofollow"><i class="fas fa-hashtag fa-fw" aria-hidden="true"></i><p>单调队列</p></a></div></div></section><div class="prev-next"><a class="prev" href="/exgcd/"><p class="title"><i class="fas fa-chevron-left" aria-hidden="true"></i>扩展欧几里得算法</p><p class="content">用途求解裴蜀方程ax+by=(a,b)ax+by=(a,b)ax+by=(a,b)的一组解，其中a,b∈N+a,b\in \mathbb{N_{+}}a,b∈N+​。 基本原理扩展欧几里得算法...</p></a><a class="next" href="/retirement-speech/"><p class="title">曾经的离别<i class="fas fa-chevron-right" aria-hidden="true"></i></p><p class="content">若洛谷是一条优美的山谷，百花盛开，姹紫嫣红，百鸟齐鸣，悦耳动听，我愿永远徜徉在山谷里，享受美好的Coding life，像其他世界的朋友们一样，永远微笑，把手伸向碧蓝的天空……而现在，我要暂时离...</p></a></div></section></article><article class="post white-box reveal comments shadow"><section class="article typo"><p ct><i class="fas fa-comments"></i> 评论</p><section id="comments"><div id="valine_container" class="valine_thread"><i class="fas fa-cog fa-spin fa-fw fa-2x"></i></div></section></section></article><script>window.subData={title:"朝花中学OI队的奋斗历程——浅谈单调队列",tools:!0}</script></div><aside class="l_side"><section class="widget blogger shadow desktop"><div class="content"><a class="avatar flat-box" href="/about/"><img no-lazy src="https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/avatar.png"></a><div class="text"><h2>Sweetlemon</h2><p>一枚有趣的 OIer！</p></div><div class="social-wrapper"><a href="mailto:sweetlemon39@foxmail.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://github.com/Sweetlemon68" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://www.luogu.com.cn/user/25008" class="social fas fa-code flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div></div></section><section class="widget grid shadow desktop mobile"><header><i class="fas fa-map-signs fa-fw" aria-hidden="true"></i><span class="name">博客导航</span></header><div class="content"><div class="grid navigation"><a class="flat-box" title="/" href="/" id="home"><i class="fas fa-home fa-fw" aria-hidden="true"></i> 博客主页 </a><a class="flat-box" title="/categories/" href="/categories/" id="categories"><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i> 文章分类 </a><a class="flat-box" title="/archives/" href="/archives/" id="archives"><i class="fas fa-archive fa-fw" aria-hidden="true"></i> 文章归档 </a><a class="flat-box" title="/friends/" href="/friends/" id="friends"><i class="fas fa-users fa-fw" aria-hidden="true"></i> 博客友链 </a><a class="flat-box" title="/comments/" href="/comments/" id="comments"><i class="fas fa-comments fa-fw" aria-hidden="true"></i> 留言评论 </a><a class="flat-box" title="/about/" href="/about/" id="about"><i class="fas fa-info-circle fa-fw" aria-hidden="true"></i> 关于博主</a></div></div></section><section class="widget grid shadow desktop mobile"><header><a href="/useful-links/"><i class="fas fa-link fa-fw" aria-hidden="true"></i><span class="name">常用站导航</span></a></header><div class="content"><div class="grid navigation"><a class="flat-box" title="https://oi-wiki.org/" href="https://oi-wiki.org/" rel="external nofollow noopener noreferrer" target="_blank" id="https:oi-wikiorg"><i class="fab fa-wikipedia-w fa-fw" aria-hidden="true"></i> OI Wiki </a><a class="flat-box" title="https://www.luogu.com.cn/" href="https://www.luogu.com.cn/" rel="external nofollow noopener noreferrer" target="_blank" id="https:wwwluogucomcn"><i class="fas fa-code fa-fw" aria-hidden="true"></i> 洛谷 </a><a class="flat-box" title="https://www.codeforces.com/" href="https://www.codeforces.com/" rel="external nofollow noopener noreferrer" target="_blank" id="https:wwwcodeforcescom"><i class="fas fa-code fa-fw" aria-hidden="true"></i> Codeforces </a><a class="flat-box" title="http://uoj.ac/" href="http://uoj.ac/" rel="external nofollow noopener noreferrer" target="_blank" id="http:uojac"><i class="fas fa-code fa-fw" aria-hidden="true"></i> UOJ </a><a class="flat-box" title="https://loj.ac/" href="https://loj.ac/" rel="external nofollow noopener noreferrer" target="_blank" id="https:lojac"><i class="fas fa-code fa-fw" aria-hidden="true"></i> LOJ </a><a class="flat-box" title="http://www.noi.cn/" href="http://www.noi.cn/" rel="external nofollow noopener noreferrer" target="_blank" id="http:wwwnoicn"><i class="fa fa-code fa-fw" aria-hidden="true"></i> CCF NOI</a></div></div></section><section class="widget category shadow desktop"><header><a href="/categories/"><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i><span class="name">文章分类</span></a></header><div class="content"><ul class="entry navigation"><li><a class="flat-box" title="/categories/%E5%8D%B3%E6%97%B6%E7%AC%94%E8%AE%B0/" href="/categories/%E5%8D%B3%E6%97%B6%E7%AC%94%E8%AE%B0/" id="categoriesE58DB3E697B6E7AC94E8AEB0"><div class="name">即时笔记</div><div class="badge">(10)</div></a></li><li><a class="flat-box" title="/categories/%E6%80%BB%E7%BB%93/" href="/categories/%E6%80%BB%E7%BB%93/" id="categoriesE680BBE7BB93"><div class="name">总结</div><div class="badge">(2)</div></a></li><li><a class="flat-box" title="/categories/%E6%96%87%E5%8C%96%E8%AF%BE/" href="/categories/%E6%96%87%E5%8C%96%E8%AF%BE/" id="categoriesE69687E58C96E8AFBE"><div class="name">文化课</div><div class="badge">(3)</div></a></li><li><a class="flat-box" title="/categories/%E7%A9%BF%E9%80%8F%E4%B8%96%E7%95%8C%E8%BE%B9%E7%BC%98%E7%9A%84%E5%91%90%E5%96%8A/" href="/categories/%E7%A9%BF%E9%80%8F%E4%B8%96%E7%95%8C%E8%BE%B9%E7%BC%98%E7%9A%84%E5%91%90%E5%96%8A/" id="categoriesE7A9BFE9808FE4B896E7958CE8BEB9E7BC98E79A84E59190E5968A"><div class="name">穿透世界边缘的呐喊</div><div class="badge">(3)</div></a></li><li><a class="flat-box" title="/categories/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/" href="/categories/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/" id="categoriesE7AE97E6B395E6B585E8A7A3"><div class="name">算法浅解</div><div class="badge">(10)</div></a></li><li><a class="flat-box" title="/categories/%E9%9A%8F%E7%AC%94/" href="/categories/%E9%9A%8F%E7%AC%94/" id="categoriesE99A8FE7AC94"><div class="name">随笔</div><div class="badge">(5)</div></a></li></ul></div></section><section class="widget tagcloud shadow desktop mobile"><header><a href="/tags/"><i class="fas fa-tags fa-fw" aria-hidden="true"></i><span class="name">热门标签</span></a></header><div class="content"><a href="/tags/GXOI/" style="font-size:14px;color:#999">GXOI</a> <a href="/tags/KMP/" style="font-size:14px;color:#999">KMP</a> <a href="/tags/THUWC/" style="font-size:14px;color:#999">THUWC</a> <a href="/tags/floyd/" style="font-size:14px;color:#999">floyd</a> <a href="/tags/gcd/" style="font-size:14px;color:#999">gcd</a> <a href="/tags/%E4%B8%96%E7%95%8C%E9%97%B4%E7%BB%AA%E8%AE%BA/" style="font-size:14px;color:#999">世界间绪论</a> <a href="/tags/%E4%B8%96%E7%95%8C%E9%97%B4%E8%AF%84%E8%AE%BA/" style="font-size:15.67px;color:#8e8e8e">世界间评论</a> <a href="/tags/%E4%BA%8C%E5%88%86%E5%9B%BE/" style="font-size:14px;color:#999">二分图</a> <a href="/tags/%E4%BD%A0%E7%9A%84%E5%90%8D%E5%AD%97/" style="font-size:14px;color:#999">你的名字</a> <a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size:14px;color:#999">函数</a> <a href="/tags/%E5%89%8D%E7%BC%80%E5%92%8C/" style="font-size:14px;color:#999">前缀和</a> <a href="/tags/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" style="font-size:17.33px;color:#828282">动态规划</a> <a href="/tags/%E5%8D%95%E8%AF%8D/" style="font-size:15.67px;color:#8e8e8e">单词</a> <a href="/tags/%E5%8D%95%E8%B0%83%E9%98%9F%E5%88%97/" style="font-size:14px;color:#999">单调队列</a> <a href="/tags/%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84/" style="font-size:14px;color:#999">后缀数组</a> <a href="/tags/%E5%9B%BE%E8%AE%BA/" style="font-size:20.67px;color:#6c6c6c">图论</a> <a href="/tags/%E5%A4%A7%E7%BA%B2/" style="font-size:14px;color:#999">大纲</a> <a href="/tags/%E5%A5%87%E9%97%BB/" style="font-size:14px;color:#999">奇闻</a> <a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size:19px;color:#777">字符串</a> <a href="/tags/%E5%B7%AE%E5%88%86/" style="font-size:14px;color:#999">差分</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" style="font-size:14px;color:#999">排序</a> <a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size:17.33px;color:#828282">搜索</a> <a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size:22.33px;color:#606060">数学</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size:17.33px;color:#828282">数据结构</a> <a href="/tags/%E6%96%87%E5%8C%96%E8%AF%BE/" style="font-size:17.33px;color:#828282">文化课</a> <a href="/tags/%E6%A0%91/" style="font-size:15.67px;color:#8e8e8e">树</a> <a href="/tags/%E7%A6%BB%E7%BA%BF/" style="font-size:14px;color:#999">离线</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size:24px;color:#555">笔记</a> <a href="/tags/%E7%AE%97%E6%B3%95%E6%B5%85%E8%A7%A3/" style="font-size:24px;color:#555">算法浅解</a> <a href="/tags/%E7%B4%AB%E7%BD%97%E5%85%B0%E6%B0%B8%E6%81%92%E8%8A%B1%E5%9B%AD/" style="font-size:14px;color:#999">紫罗兰永恒花园</a> <a href="/tags/%E8%8B%B1%E8%AF%AD/" style="font-size:15.67px;color:#8e8e8e">英语</a> <a href="/tags/%E8%92%9F%E8%92%BB/" style="font-size:14px;color:#999">蒟蒻</a> <a href="/tags/%E8%B4%AA%E5%BF%83/" style="font-size:14px;color:#999">贪心</a> <a href="/tags/%E9%80%80%E5%BD%B9/" style="font-size:14px;color:#999">退役</a> <a href="/tags/%E9%9A%8F%E7%AC%94/" style="font-size:15.67px;color:#8e8e8e">随笔</a></div></section><section class="widget toc-wrapper shadow desktop mobile"><header><i class="fas fa-list fa-fw" aria-hidden="true"></i><span class="name">本文目录</span></header><div class="content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#问题背景"><span class="toc-text">问题背景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题思路"><span class="toc-text">问题思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题总结"><span class="toc-text">问题总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#代码实现"><span class="toc-text">代码实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#练习与最后的废话"><span class="toc-text">练习与最后的废话</span></a></li></ol></div></section></aside><footer class="clearfix"><br><br><div class="aplayer-container"><meting-js theme="#1BCDFC" autoplay volume="0.7" loop order="list" fixed="false" list-max-height="340px" server="netease" type="song" id="551339691" list-folded="true"></meting-js></div><br><div class="social-wrapper"><a href="mailto:sweetlemon39@foxmail.com" class="social fas fa-envelope flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://github.com/Sweetlemon68" class="social fab fa-github flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a> <a href="https://www.luogu.com.cn/user/25008" class="social fas fa-code flat-btn" target="_blank" rel="external nofollow noopener noreferrer"></a></div><div class="copyright"><p>By <a href="https://sweetlemon39.github.io">Sweetlemon</a>, with <a href="https://hexo.io/" target="_blank" rel="noopener">hexo</a> theme <a href="https://volantis.js.org/" target="_blank" rel="noopener">volantis</a>.</p></div><div><br></div><div><p><a href="https://icp.gov.moe" target="_blank">萌ICP备 </a><a href="https://icp.gov.moe/?keyword=20213968" target="_blank">20213968号</a></p></div></footer><script>setLoadingBarProgress(80)</script><script>setLoadingBarProgress(60)</script></div><a class="s-top fas fa-arrow-up fa-fw" href="javascript:void(0)"></a></div><script src="https://cdn.jsdelivr.net/npm/jquery@3.4/dist/jquery.min.js"></script><script>var SEARCH_SERVICE="hexo",ROOT="/";ROOT.endsWith("/")||(ROOT+="/")</script><script async src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/instant_page.js" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script><script src="https://cdn.jsdelivr.net/npm/scrollreveal@4.0.6/dist/scrollreveal.min.js"></script><script type="text/javascript">$((function(){ScrollReveal().reveal(".l_main .reveal",{distance:"8px",duration:"800",interval:"100",scale:"1"})}))</script><script src="https://cdn.jsdelivr.net/npm/node-waves@0.7.6/dist/waves.min.js"></script><script type="text/javascript">$((function(){Waves.attach(".flat-btn",["waves-button"]),Waves.attach(".float-btn",["waves-button","waves-float"]),Waves.attach(".float-btn-light",["waves-button","waves-float","waves-light"]),Waves.attach(".flat-box",["waves-block"]),Waves.attach(".float-box",["waves-block","waves-float"]),Waves.attach(".waves-image"),Waves.init()}))</script><script src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script><script type="text/javascript">$((function(){var e=["https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/vc_247324.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/violet_259998.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__07.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__06.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__03.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/your_name_233767.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__05.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/kagerou_183538.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_262935.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__01.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/tianyi_221481.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_289028.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/kagerou_184531.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/ia_292142.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/vc_184412.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/tianyi_229042.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__02.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_288524.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__04.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/anohana_172855.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_279631.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__08.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/kagerou_191672.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/violet_261791.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/ia_217561.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_297251.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/voc_261300.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_289023.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__09.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/sukasuka__10.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_55005893.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/voc_215624.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/miku_56632668.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/osu_66184019.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/osu_80835141.jpg","https://cdn.jsdelivr.net/gh/Sweetlemon39/Sweetlemon39.github.io@dev/images/bg/osu_80841063.jpg"];!function(e){for(var t=e.length;t--;){var g=Math.floor(Math.random()*t),i=e[g];e[g]=e[t],e[t]=i}}(e),$.backstretch(e,{duration:"20000",fade:"1500"})}))</script><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2.0/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4/dist/Valine.min.js"></script><script>var GUEST_INFO=["nick","mail","link"],meta="nick,mail,link".split(",").filter((function(i){return GUEST_INFO.indexOf(i)>-1})),REQUIRED_FIELDS=["nick","mail","link"],requiredFields="nick,mail".split(",").filter((function(i){return REQUIRED_FIELDS.indexOf(i)>-1})),valine=new Valine;function emoji(i,e,a){return i+"/"+i+"-"+e+"."+a}for(var emojiMaps={},i=1;i<=54;i++)emojiMaps["tieba-"+i]=emoji("tieba",i,"png");for(i=1;i<=101;i++)emojiMaps["qq-"+i]=emoji("qq",i,"gif");for(i=1;i<=116;i++)emojiMaps["aru-"+i]=emoji("aru",i,"gif");for(i=1;i<=125;i++)emojiMaps["twemoji-"+i]=emoji("twemoji",i,"png");for(i=1;i<=4;i++)emojiMaps["weibo-"+i]=emoji("weibo",i,"png");valine.init({el:"#valine_container",meta:meta,appId:"uzT4lXHwcPJOlEGevXF7jqRU-gzGzoHsz",appKey:"vVl1bqbOX0WUiA9WFlFhMxBb",placeholder:"快来评论吧~",pageSize:"10",avatar:"robohash",lang:"zh-cn",visitor:"true",highlight:"true",mathJax:"true",enableQQ:"true",requiredFields:requiredFields,emojiCDN:"https://cdn.jsdelivr.net/gh/xaoxuu/cdn-assets/emoji/valine/",emojiMaps:emojiMaps})</script><script src="/js/app.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2.6.4/js/search.js"></script><script src="https://cdn.jsdelivr.net/gh/xaoxuu/cdn-volantis@2/js/comment_typing.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script><script>function wait(e,n){window.setTimeout(e,n)}window,document,function(){var e="";e+='<button class="btn-copy" data-clipboard-snippet="">',e+='<i class="fas fa-copy"></i><span>COPY</span>',e+="</button>",$(".highlight .code pre").before(e),$(".article pre code").before(e);var n=new ClipboardJS(".btn-copy",{target:function(e){return e.nextElementSibling}});n.on("success",(function(e){let n=$(e.trigger);n.addClass("copied");let a=$(n.find("i"));a.removeClass("fa-copy"),a.addClass("fa-check-circle");let i=$(n.find("span"));i[0].innerText="COPIED",wait((function(){a.removeClass("fa-check-circle"),a.addClass("fa-copy"),i[0].innerText="COPY"}),2e3)})),n.on("error",(function(e){e.clearSelection();let n=$(e.trigger);n.addClass("copy-failed");let a=$(n.find("i"));a.removeClass("fa-copy"),a.addClass("fa-times-circle");let i=$(n.find("span"));i[0].innerText="COPY FAILED",wait((function(){a.removeClass("fa-times-circle"),a.addClass("fa-copy"),i[0].innerText="COPY"}),2e3)}))}()</script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script>let LAZY_LOAD_IMAGE="";$(".article-entry").find("div.fancybox").find("img").each((function(){var t=document.createElement("a");$(t).attr("data-fancybox","gallery"),$(t).attr("href",$(this).attr("src")),LAZY_LOAD_IMAGE&&$(t).attr("href",$(this).attr("data-original")),$(this).wrap(t)}))</script><script>setLoadingBarProgress(100)</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":true,"model":{"jsonPath":"/live2dw/assets/assets/kutori.model.json"},"display":{"position":"right","width":200,"height":400},"mobile":{"show":false},"react":{"opacity":0.7},"dialog":{"enable":true,"hitokoto":true},"log":false});</script></body></html>