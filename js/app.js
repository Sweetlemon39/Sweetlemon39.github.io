var customSearch;(m=>{var h=80;let p=m(".l_header",".cover-wrapper");function g(e,a=h){e=e.href?m(e.getAttribute("href")):m(e);m("html, body").animate({scrollTop:e.offset().top-a},500)}p[0]&&(h=p[0].clientHeight+16),m(function(){if(window.subData){let t=m("header .wrapper");var e=m(".s-comment",t);let a=m(".s-toc",t),o=(t.find(".nav-sub .title").text(window.subData.title),document.body.scrollTop),l=(m(document,window).scroll(()=>{var e=m(window).scrollTop(),a=e-o;50<=a&&100<e?(o=e,t.addClass("sub")):a<=-50&&(o=e,t.removeClass("sub"))}),m(".l_body .comments")),r=(l.length?e.click(e=>{e.preventDefault(),e.stopPropagation(),g(l)}):e.remove(),m(".l_body .toc-wrapper"));r.length&&r.children().length?(a.click(e=>{e.stopPropagation(),r.toggleClass("active"),a.toggleClass("active")}),m(document).click(function(e){r.removeClass("active"),a.removeClass("active")}),m(document,window).scroll(()=>{r.removeClass("active"),a.removeClass("active")})):a.remove()}var a,t,o;(e=m("body .navigation")).find("li a.active").removeClass("active"),r=location.pathname.replace(/\/|%|\./g,""),(l=(r=0==r.length?"home":r).match(/page\d{0,}$/g))&&(l=l[0],r=r.split(l)[0]),(l=r.match(/index.html/))&&(l=l[0],r=r.split(l)[0]),r&&e&&(l=m("#"+r,e),r=l)&&r.length&&r.addClass("active").siblings().removeClass("active"),a=m(".l_header .switcher .s-search"),t=m(".l_header"),o=m(".l_header .m_search"),0!==a.length&&(a.click(function(e){e.stopPropagation(),t.toggleClass("z_search-open"),o.find("input").focus(),a.toggleClass("active")}),m(document).click(function(e){t.removeClass("z_search-open"),a.removeClass("active")}),o.click(function(e){e.stopPropagation()}),t.ready(function(){t.bind("keydown",function(e){if(9==e.keyCode)return!1;var a,t=!!document.all,e=t?(a=window.event.keyCode,window.event):(a=e.which,e);9==a&&(t?(e.keyCode=0,e.returnValue=!1):(e.which=0,e.preventDefault()))})}));{let t=m(".toc-wrapper");if(0!==t.length){t.click(e=>{e.stopPropagation(),t.addClass("active")}),m(document).click(()=>t.removeClass("active")),t.on("click","a",e=>{e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?g(e.target,0):"SPAN"===e.target.tagName&&g(e.target.parentElement,0),t.removeClass("active");e=m(".s-toc");0<e.length&&e.removeClass("active")});let l=Array.from(t.find("li a")),e=()=>l.map(e=>Math.floor(m(e.getAttribute("href")).offset().top-h)),r=e(),a=()=>{var o=m("html").scrollTop()||m("body").scrollTop();if(r){let e=0,a=r.length-1,t;for(;e<a;)t=e+a+1>>1,r[t]===o?e=a=t:r[t]<o?e=t:a=t-1;m(l).removeClass("active").eq(e).addClass("active")}};m(window).resize(()=>{r=e(),a()}).scroll(()=>{a()}),a()}}{var l=m(".menu .active");let t=m(".s-top");var r=m("h1.title","#header-meta");let a=m(".l_body");l.length&&a&&l.click(e=>{e.preventDefault(),e.stopPropagation(),g(a)}),r.length&&a&&r.click(e=>{e.preventDefault(),e.stopPropagation(),g(a)}),t.length&&a&&t.click(e=>{e.preventDefault(),e.stopPropagation(),g(a)});var l=m(".cover-wrapper"),i=0,n=(l[0]&&(i=l[0].clientHeight-180),document.body.scrollTop);m(document,window).scroll(()=>{var e=m(window).scrollTop(),a=e-n;180<(n=e)?(t.addClass("show"),0<a?t.removeClass("hl"):t.addClass("hl")):t.removeClass("show").removeClass("hl"),i<e?p.addClass("show"):p.removeClass("show")})}"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/img/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/img/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/img/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/img/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/img/"}));var s=m(".tabs");if(0!==s.length){for(var c=s.find(".nav-tabs .tab"),d=0;d<c.length;d++){var v=s.find(c[d].children[0]);v.addClass(v.attr("href")),v.removeAttr("href")}m(".tabs .nav-tabs").on("click","a",e=>{e.preventDefault(),e.stopPropagation();var a=m(e.target.parentElement.parentElement.parentElement);return a.find(".nav-tabs .active").removeClass("active"),a.find(e.target.parentElement).addClass("active"),a.find(".tab-content .active").removeClass("active"),a.find(m(e.target).attr("class")).addClass("active"),!1})}m(".scroll-down").on("click",function(){g(".l_body")}),setTimeout(function(){m("#loading-bar-wrapper").fadeOut(500)},300)})})(jQuery);